<!DOCTYPE html>
<html lang="en">

<head>
    <title>Task</title>
</head>

<body>
    <div>
        <h3>unordered list of student names</h3>
        <ul id="item1"></ul>
    </div>
    <div>
        <h3>Display only students who scored more than 60 marks</h3>
        <ul id="item2"></ul>
    </div>
    <div>
        <h3>Count how many students belong to each department.</h3>
        <ul id="item3"></ul>
    </div>
    <div>
        <h3>Find the student with the highest marks.</h3>
        <ul id="item4"></ul>
    </div>
    <h3>Display students in a table with columns: Name, Marks, Department.</h3>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>NAME</th>
                <th>MARKS</th>
                <th>DEPT</th>
            </tr>
        </thead>
        <tbody id="data">

        </tbody>
    </table>
    <div>
        <h3>Calculate the average marks of all students.</h3>
        <ul id="item5"></ul>
    </div>
    <div>
        <h3>CSE students in class</h3>
        <ul id="item6"></ul>
    </div>
    <div>
        <h3>Sort students by marks in descending order</h3>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>NAME</th>
                    <th>MARKS</th>
                    <th>DEPT</th>
                </tr>
            </thead>
            <tbody id="data2">

            </tbody>
        </table>
    </div>
    <div>
        <h3>Add a new student object and update the HTML list.</h3>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>NAME</th>
                    <th>MARKS</th>
                    <th>DEPT</th>
                </tr>
            </thead>
            <tbody id="item8">

            </tbody>
        </table>
    </div>
    <div>
        <h3>Highlight students who failed (marks < 50) in red color.</h3>
                <!-- <ul id="item9" style="color: red;"></ul> -->
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>NAME</th>
                            <th>MARKS</th>
                            <th>DEPT</th>
                        </tr>
                    </thead>
                    <tbody id="item9">
                    </tbody>
                </table>
    </div>
</body>
<script>
    const Students = [
        { id: 1, name: "sai", marks: 78, department: "CSE" },
        { id: 2, name: "nikhil", marks: 92, department: "ECE" },
        { id: 3, name: "harish", marks: 45, department: "MECH" },
        { id: 4, name: "divya", marks: 66, department: "CSE" },
        { id: 5, name: "mubeen", marks: 88, department: "ECE" },
        { id: 6, name: "mandeep", marks: 48, department: "CSE" },
        { id: 8, name: "nissi", marks: 52, department: "ECE" },
        { id: 9, name: "Rahul", marks: 85, department: "MECH" },
        { id: 10, name: "kirthi", marks: 76, department: "CSE" },
        { id: 11, name: "seshu", marks: 98, department: "ECE" }
    ];

    let ul_ele = document.getElementById("item1");
    let ul_ele2 = document.getElementById("item2");
    let ul_ele3 = document.getElementById("item3");
    let ul_ele4 = document.getElementById("item4");



    //unordered list of student names
    Students.forEach(student => {
        const list_students = document.createElement("li");
        list_students.textContent = student.name;
        ul_ele.appendChild(list_students);
    });

    //Display only students who scored more than 60 marks
    Students.forEach(student => {
        const list_students = document.createElement("li");
        let mark = list_students.textContent = student.marks;
        if (mark > 60) {
            ul_ele2.appendChild(list_students);
        }
    });

    //Count how many students belong to each department.

    var count_cse = 0;
    var count_ece = 0;
    var count_mech = 0;
    Students.forEach(student => {
        // const list_students = document.createElement("li");
         var dept =  student.department;

        if (dept == "CSE") {
            count_cse++;
        }
        else if (dept == "ECE") {
            count_ece++;
        }
        else if (dept == "MECH") {
            count_mech++
        }
        else {
            alert("no dept found");
        }
    });
    const licse=document.createElement("li");
    licse.textContent=`Count of CSE students: ${count_cse}`;

     const liece=document.createElement("li");
    liece.textContent=`Count of ECE students: ${count_ece}`;

    const limech=document.createElement("li");
    limech.textContent=`Count of MECH students: ${count_mech}`;

    ul_ele3.appendChild(licse);
    ul_ele3.appendChild(liece);
    ul_ele3.appendChild(limech);

    //Find the student with the highest marks.
    var highest = 0;
    var Toppername = "";
    Students.forEach(student => {
        const list_students = document.createElement("li");
        let mark = list_students.textContent = student.marks;
        let name = list_students.textContent = student.name;
        if (mark > highest) {
            highest = mark;
            Toppername = name;
        }

    });
    //  console.log(highest);
    ul_ele4.append(`${Toppername} got the highted marks in class is ${highest}`);

    //Display students in a table with columns: Name, Marks, Department.

    let t_ele = document.getElementById("data");


    let output = ``;
    Students.forEach(ele => {
        output += `<tr>
                   <td>${ele.id}</td>
                   <td>${ele.name}</td>
                   <td>${ele.marks}</td>
                   <td>${ele.department}</td>
               <tr>`;
    });
    t_ele.innerHTML = output;


    //Calculate the average marks of all students.

    let sum = 0;
    let ul_ele5 = document.getElementById("item5");

    Students.forEach(student => {
        const list_students = document.createElement("li");
        let mark = list_students.textContent = student.marks;
        sum += mark;
    });
    let avg = sum / Students.length;
    ul_ele5.append(`Average marks of all students is ${avg}`);

    //Display only CSE students in HTML.
    let ul_ele6 = document.getElementById("item6");
    Students.forEach(student => {
        const list_students = document.createElement("li");
        var dept = list_students.textContent = student.department;
        if (dept == "CSE") {
            let name = list_students.textContent = student.name;
            ul_ele6.append(name + " ");
        }
    });

    //Sort students by marks in descending order.
    let ul_ele7 = document.getElementById("data2");
    var studentsSortByMarks = Students.sort((a, b) => b.marks - a.marks);

    let output1 = ``;
    studentsSortByMarks.forEach(ele => {
        output1 += `<tr>
                    <td>${ele.id}</td>
                   <td>${ele.name}</td>
                  <td>${ele.marks}</td>
                  <td>${ele.department}</td>
              <tr>`;
    });
    ul_ele7.innerHTML = output1;

    //Add a new student object and update the HTML list.

    let ul_ele8 = document.getElementById("item8");
    Students.push({ id: 12, name: "nithin", marks: 68, department: "CSE" });
  var studentsSortById = Students.sort((a, b) => a.id-b.id);
    let output2 = ``;
    studentsSortById.forEach(ele => {
        output2 += `<tr>
                    <td>${ele.id}</td>
                   <td>${ele.name}</td>
                  <td>${ele.marks}</td>
                  <td>${ele.department}</td>
              <tr>`;
    });
    ul_ele8.innerHTML = output2;

    //Highlight students who failed (marks < 50) in red color.
    let ul_ele9 = document.getElementById("item9");

    // Students.forEach(student => {
    //     const list_students = document.createElement("li");
    //     let mark = list_students.textContent = student.marks;
    //     output3=``;
    //     if (mark < 50) {
    //         ul_ele9.append(student.id+" ");
    //         ul_ele9.append(student.name+" ");
    //         ul_ele9.append(student.marks+" ");
    //         ul_ele9.append(student.department+" ");
    //     }
    // });

    let output3 = ``;
    Students.forEach(ele => {
        
        let mark= ele.marks;
        if (mark < 50) {
            output3 += `<tr style="color: red;">
                    <td>${ele.id}</td>
                   <td>${ele.name}</td>
                  <td>${ele.marks}</td>
                  <td>${ele.department}</td>
              <tr>`;
        }
        else{
             output3 += `<tr>
                    <td>${ele.id}</td>
                   <td>${ele.name}</td>
                  <td>${ele.marks}</td>
                  <td>${ele.department}</td>
              <tr>`;
        }
    });
    ul_ele9.innerHTML = output3;


</script>

</html>